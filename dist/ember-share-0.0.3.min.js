!function(a){define("ember-share",["ember-share/mixins/share-text","ember-share/models/model","ember-share/store","ember-share/utils","ember-share/attr","ember-share/belongs-to","exports"],function(a,b,c,d,e,f,g){"use strict";var h=a["default"],i=b["default"],j=c["default"],k=d["default"],l=e["default"],m=f["default"],n=l("_sdbProps");g.ShareTextMixin=h,g.ShareProxy=i,g.belongsTo=m,g.Store=j,g.Utils=k,g.attr=n}),define("ember-share/attr",["exports"],function(a){"use strict";var b=function(a){return a};a["default"]=function(a){return function(){var c,d;if(c={},d=null,_.forEach(arguments,function(a){return _.isPlainObject(a)?c=a:_.isString(a)?d=a.charAt(0).toUpperCase()+a.slice(1):void 0}),null!=d&&null!=window[d])var e=function(a){var b=new window[d](a);return"Date"==d?b:b.valueOf()};else var e=b;return Ember.computed({get:function(b){this.get(a,!0).addObject(b);var c=_.includes(["_isSDB","_sdbProps","_subProps","doc","_prefix","content","_idx","_root"],b);return e(c||null==this._fullPath?this._get(b,!0):this._get(this._fullPath(b)))},set:function(a,b,c){var d=null==a?this.get("_prefix"):"_idx"!=a&&this._fullPath?this._fullPath(a):a;return this._set(d,b)}})}}}),define("ember-share/belongs-to",["exports"],function(a){"use strict";a["default"]=function(a,b){var c=this.originalStore;return Ember.computed({get:function(a){var d;return c.findRecord(b,this.get(d="doc.data."+a))},set:function(a,b,c){return b}})}}),define("ember-share/mixins/share-text",["../utils","exports"],function(a,b){"use strict";var c=(a.isArray,a.diff);b["default"]=Ember.Mixin.create({textKeys:[],triggerEvents:!1,textEvents:function(){this._textContexts=new Array(this.textKeys.length),this._handlers=new Array(2*this._textContexts.length);for(var a=0;a<this.textKeys.length;a++){var b=this.textKeys[a],c=this._context.createContextAt([b]);this._handlers[b]=new Array(2),this._handlers[b].push(c.on("insert",Ember.run.bind(this,this.handleInsert,b))),this._handlers[b].push(c.on("delete",Ember.run.bind(this,this.handleDelete,b))),this._textContexts[b]=c}}.on("init"),setUnknownProperty:function(a,b){this.textKeys.indexOf(a)>=0?this.textOp(a,b):this._super(a,b)},textOp:function(a,b){if(void 0!==this._context.get()){this.propertyWillChange(a);var d=c.diff(this._cache[a]||"",b.replace(/\r\n/g,"\n"));this._cache[a]=b.replace(/\r\n/g,"\n");for(var e=0,f=0;f<d.length;f++)d[f].added?this._context.insert([a,e],d[f].value):d[f].removed&&this._context.remove([a,e],d[f].value.length),e+=d[f].value.length;this.propertyDidChange(a)}},handleInsert:function(a,b,c){this.propertyWillChange(a),void 0===this._cache[a]&&this.get(a);var d=this._cache[a].slice(0,b)+c+this._cache[a].slice(b);this._cache[a]=d,this.triggerEvents&&this.trigger("textInsert",b,c),this.propertyDidChange(a)},handleDelete:function(a,b,c){void 0===this._cache[a]&&this.get(a),this.propertyWillChange(a);var d=c.length,e=this._cache[a].slice(0,b)+this._cache[a].slice(b+d);this._cache[a]=e,this.triggerEvents&&this.trigger("textDelete",b,c),this.propertyDidChange(a)},willDestroy:function(){for(var a in this._textContexts)this._textContexts[a].removeListener(this._handlers[a][0]),this._textContexts[a].removeListener(this._handlers[a][1]),this._textContexts[a].destroy();this._super()}})}),define("ember-share/models/base",["./use-subs-mixin","./sub-mixin","./sub-array","./subs-handler","./utils","exports"],function(a,b,c,d,e,f){"use strict";var g=a["default"],h=b["default"],i=c["default"],j=d["default"],k=e["default"],l=function(a){return null==a?void 0:JSON.parse(JSON.stringify(a))},m=function(a){return null!=a&&"string"!=typeof a&&"number"!=typeof a?"function"==typeof a.toJson?a.toJson():l(a):a},n=Ember.Mixin.create({_get:function(a,b){var c=_.first(a.split("."));if("_sdbProps"!=a&&_.includes(this.get("_sdbProps"),c)){var d=this.get("doc.data."+a);return this.useSubs(d,a)}return this.get(a)},_set:function(a,b){var c=_.first(a.split(".")),d=this;if(null==Ember.get(this,"_prefix")&&this.get(c),"_sdbProps"!=a&&_.includes(this.get("_sdbProps"),c)){var e=m(this._get(a));b=m(b);var f=a.split("."),g=k(this);g.removeChildren(a,!0);var h={p:f,od:e,oi:b};return null==e&&delete h.od,h.oi!=h.od&&this.get("doc").submitOp([h],function(a){d.get("_root",!0).trigger("submitted",a)}),this.useSubs(b,a)}return this.set(a,b,!0)}}),o=Ember.Object.extend(Ember.Evented,n,{_isSDB:!0,notifyProperties:function(a){var b=this;return _.forEach(a,function(a){b.notifyPropertyChange(a)}),this},notifyDidProperties:function(a){var b=this;return _.forEach(a,function(a){b.propertyDidChange(a)}),this},notifyWillProperties:function(a){var b=this;return _.forEach(a,function(a){b.propertyWillChange(a)}),this},deleteProperty:function(a){var b=this.get("doc"),c=a.split("."),d=m(this.get(a));b.submitOp([{p:c,od:d}])},setProperties:function(a){var b=this.get("_sdbProps"),c=this,d=_.filter(_.keys(a),function(a){return c.get(a),_.includes(b,a)}),e=_.reject(_.keys(a),function(a){return _.includes(b,a)});this._super(_.pick(a,e)),_.forEach(d,function(b){c.set(b,a[b])})}});o=o.extend(g),j.object=o.extend(h),j.array=i(h,n).extend(g),f["default"]=o}),define("ember-share/models/model",["./utils","./base","exports"],function(a,b,c){"use strict";var d=a["default"],e=b["default"],f=e.extend({unload:function(){return this.get("_store").unload(this.get("_type"),this)},id:Ember.computed.reads("doc.id"),_childLimiations:function(){return[]}.property(),_root:function(){return this}.property(),_children:function(){return{}}.property(),_sdbProps:function(){return[]}.property(),setOpsInit:function(){var a=this.get("doc",!0),b=this.get("oldDoc"),c=d(this);b&&b.destroy(),a.on("before component",c.beforeAfter("Will")),a.on("after component",c.beforeAfter("Did")),this.set("oldDoc",a)}.observes("doc").on("init"),willDestroy:function(){var a=d(this);this._super.apply(this,arguments),a.removeChildren(),console.log("destroying children")}});c["default"]=f}),define("ember-share/models/sub-array",["./sub-mixin","./base","exports"],function(a,b,c){"use strict";var d=(a["default"],b["default"],function(a){return a.slice(0,a.length-1)});c["default"]=function(a,b){return Ember.ArrayProxy.extend(Ember.Evented,a,b,{_isArrayProxy:!0,arrayContentDidChange:function(a,b,c){var d=null==b?0:-1*b;return(d+(null==c)?0:c)&&Ember.get(this,"content").propertyDidChange("lastObject"),this._super.apply(this,arguments)},arrayContentWillChange:function(a,b,c){var e=Ember.get(this,"_children"),f=Object.keys(e),g=Ember.get(this,"_prefix"),h=function(a,b){var c=d(a.split("."));return c.join(".")+"."+b},i=null==b?0:-1*b;return c=null==c?0:c,i+c&&Ember.get(this,"content").propertyWillChange("lastObject"),f=_.reduce(f,function(a,b){return d(b.split(".")).join(".")==g&&a.push(b),a},[]),_.forEach(f,function(d){var f=+_.last(d);if(!isNaN(f)&&(c&&f>=a||b&&f>a)){var g=f+i+c,j=e[d];delete e[d];var k={};k[h(d,g)]=j,_.assign(e,k),Ember.set(j,"_idx",g)}}),this._super.apply(this,arguments)},replaceContent:function(a,b){var c=Ember.get(this,"_prefix"),d=Ember.get(this,"_children");return _.forEach(this.toArray(),function(b,e){var f=d[c+"."+e];null!=f&&(null!=a[e]?f.replaceContent(a[e],!0):(delete d[c+"."+e],f.destroy()))}),b||this._set(c,a),Ember.set(this,"content",a),this},_submitOp:function(a,b,c){var d=this.get("_prefix").split("."),e={p:d.concat(a)};return null!=b&&(e.li=b),null!=c&&(e.ld=c),null!=b||null!=c?this.get("doc").submitOp([e]):void 0},objectAt:function(a){var b=this._super(a),c=this.get("_prefix");return this.useSubs(b,c,a)},toJson:function(){return _.map(this.toArray(),function(a){return"string"==typeof a||"number"==typeof a?a:a.toJson()})},_replace:function(a,b,c){this.arrayContentWillChange(a,b,c.length);for(var d=b>c.length?b:c.length,e=0;d>e;e++){var f=e+a,g=c.objectAt(e);this._submitOp(f,g,b>e?this.objectAt(f):null)}return this.arrayContentDidChange(a,b,c.length),this},onChangeDoc:function(){this.replaceContent(this.get("doc.data."+this.get("_prefix")),!0)}.observes("doc")})}}),define("ember-share/models/sub-mixin",["./utils","../attr","exports"],function(a,b,c){"use strict";var d=a["default"],e=b["default"];c["default"]=Ember.Mixin.create({_children:function(){return{}}.property(),_sdbProps:function(){return[]}.property(),_subProps:function(){return[]}.property(),doc:Ember.computed.reads("_root.doc"),createInnerAttrs:function(){var a=Ember.get(this,"tempContent"),b=this,c=e("_subProps"),d=[];_.forEach(a,function(a,e){d.push(e),Ember.defineProperty(b,e,c())}),Ember.get(this,"_subProps").addObjects(d),delete this.tempContent}.on("init"),beforeFn:function(){return[]}.property(),afterFn:function(){return[]}.property(),activateListeners:function(){var a=d(this),b=a.beforeAfterChild("Will"),c=a.beforeAfterChild("Did");this.has("before op")&&this.off("before op",this.get("beforeFn").pop()),this.has("op")&&this.off("op",this.get("afterFn").pop()),this.on("before op",b),this.on("op",c),this.get("beforeFn").push(b),this.get("afterFn").push(c)}.observes("doc").on("init"),_fullPath:function(a){var b=Ember.get(this,"_prefix"),c=Ember.get(this,"_idx");return b?null!=c?b+"."+c+"."+a:b+"."+a:a},deleteProperty:function(a){return this.removeKey(a),this._super(this._fullPath(a))},replaceContent:function(a,b){this.notifyWillProperties(this.get("_subProps").toArray());var c=this.get("_prefix"),e=this.get("_idx"),f=null==e?c:c+"."+e;b||this._set(f,a);var g=this,h=d(this);if(h.removeChildren(f),_.isEmpty(Object.keys(this))){Ember.setProperties(this,{tempContent:a}),this.createInnerAttrs();var i=function(a,b){if(_.isEmpty(a))g.get("_root").notifyPropertyChange(b.join("."));else{var c=g.get._children[a.join(".")];null!=c?c.notifyPropertyChange(a.join(".")+"."+b.join(".")):b.push(a.pop()),i(a,b)}},j=c.split("."),k=j.pop();i(j,[k])}else{if(_.isPlainObject(a))var l=_.difference(Object.keys(this),Object.keys(a));else var l=Object.keys(this);_.forEach(l,function(a){delete g[a]}),this.get("_subProps").removeObjects(l),Ember.setProperties(this,{tempContent:a}),this.createInnerAttrs(),this.notifyDidProperties(this.get("_subProps").toArray())}return this},toJson:function(){var a=Ember.get(this,"_idx"),b=Ember.get(this,"_prefix"),c=null==a?b:b+"."+a;return this.get("doc.data."+c)},addKey:function(a){var b=e("_subProps");return this.get("_subProps").indexOf(a)>-1||Ember.defineProperty(this,a,b()),this},removeKey:function(a){var b=(e("_subProps"),d(this));return b.removeChildren(a,!0),this.get("_subProps").removeObject(a),delete this[a],this},removeListeners:function(){this.off("before op",this.get("beforeFn")),this.off("op",this.get("afterFn"))}})}),define("ember-share/models/subs-handler",["exports"],function(a){"use strict";a["default"]={object:{},array:{}}}),define("ember-share/models/use-subs-mixin",["./subs-handler","./utils","exports"],function(a,b,c){"use strict";var d=a["default"],e=b["default"];c["default"]=Ember.Mixin.create({useSubs:function(a,b,c){var f=e(this);if(f.matchChildToLimitations(b))return a;if(_.isPlainObject(a)){a={tempContent:a};var g="object"}else if(_.isArray(a)){a={content:a};var g="array"}if(g){var h,i,j=null==c?b:b+"."+c,k=Ember.get(this,"_prefix");if(null!=(i=Ember.get(this,"_idx"))&&(k+="."+i),j==k)return this;var l=Ember.get(this,"_children"),m=Object.keys(l);if(_.includes(m,j))return l[j];h={};var n=d[g].extend({_children:Ember.get(this,"_children"),_prefix:b,_idx:c,_sdbProps:Ember.get(this,"_sdbProps"),_root:Ember.get(this,"_root")});return n=n.create(a),h[j]=n,_.assign(Ember.get(this,"_children"),h),n}return a}})}),define("ember-share/models/utils",["exports"],function(a){"use strict";a["default"]=function(a){return{isOpOnArray:function(a){return null!=a.ld||null!=a.lm||null!=a.li},matchingPaths:function(a,b){for(var c=0,d=a.length>b.length?a.length:b.length;("*"==a[c]||a[c]==b[c])&&d>c;)c++;return c-a.length/1e3},matchChildToLimitations:function(b){var c=Ember.get(a,"_root._childLimiations"),d=Ember.get(a,"_prefix");null==d||b.match(d)?d=b:d+="."+b,d=d.split(".");var e=this;return _.some(c,function(a){var b=a.split("/");return d.length==b.length&&Math.ceil(e.matchingPaths(b,d))==d.length})},prefixToChildLimiations:function(b){var c=Ember.get(a,"_root._childLimiations"),d=Ember.get(a,"_prefix");null==d||b.match(d)?d=b:d+="."+b,d=d.split(".");var e,f=this,g=this.findMaxIndex(e=_.map(c,function(a){var b=a.split("/"),c=Math.ceil(f.matchingPaths(b,d));return c<b.length?0:c}));if(g>=0&&e[g]>0){var h,i=c[g].split("/"),j=d.slice(0,Math.ceil(f.matchingPaths(i,d)));return(h=Ember.get(a,"_prefix"))?(h=h.split("."),j.slice(h.length)):j.join(".")}return b},removeChildren:function(b,c){var d=Ember.get(a,"_children"),e=Object.keys(d),f=a.get("_prefix"),g=this;null!=f&&b&&0!=b.indexOf(f)&&(b=f+"."+b),b&&(e=_.reduce(e,function(a,d){var e=Math.ceil(g.matchingPaths(d.split("."),b.split(".")));return(c&&e>=b.split(".").length||!c&&e>b.split(".").length)&&a.push(d),a},[])),_.forEach(e,function(a){d[a].destroy(),delete d[a]})},comparePathToPrefix:function(a,b){return Boolean(Math.ceil(this.matchingPaths(a.split("."),b.split("."))))},cutLast:function(a,b){var c;return this.isOpOnArray(b)&&!isNaN(+_.last(a))&&(c=_.clone(a),c.pop()),c?c:a},comparePathToChildren:function(b,c){var d=this,e=Ember.get(a,"_children"),f=Object.keys(e),g=_.some(f,function(a){var e=d.matchingPaths(a.split("."),d.cutLast(b,c));return Math.ceil(e)==a.split(".").length});return!Ember.isEmpty(f)&&g},triggerChildren:function(b,c,d){var e=(_.clone(c.p),a.get("_children")),f=Object.keys(e);if(!Ember.isEmpty(f)){var g=this,h=_.mapKeys(e,function(a,b){return g.isOpOnArray(c)&&!isNaN(+_.last(b.split(".")))?0:g.matchingPaths(g.cutLast(b.split("."),c),c.p)}),i=function(a){return _.map(a,function(a){return+a})},j=h[_.max(i(Object.keys(h)))];"Will"==b&&j.trigger("before op",[c],d),"Did"==b&&j.trigger("op",[c],d)}},beforeAfter:function(b){var c,d=this;return function(e,f){f||_.forEach(e,function(e){d.comparePathToChildren(e.p,e)?d.triggerChildren(b,e,f):d.isOpOnArray(e)?(c=d.extractArrayPath(e),a.get(c.p)["arrayContent"+b+"Change"](c.idx,c.removeAmt,c.addAmt)):a["property"+b+"Change"](d.prefixToChildLimiations(e.p.join(".")))})}},beforeAfterChild:function(b){var c,d,e,f=this;return function(g,h){null==(e=Ember.get(a,"_idx"))&&h||_.forEach(g,function(g){if(g.p.join(".")==(d=Ember.get(a,"_prefix"))&&"Did"==b){if(null!=g.oi)a.replaceContent(g.oi,!0);else if(null!=g.od){var h,i=d.split("."),j=i.pop();!_.isEmpty(i)&&(h=a.get("_children."+i.join(".")))?h.removeKey(j):a.get("_root").propertyDidChange(d)}}else{var k=null==e?d.split("."):d.split(".").concat(String(e)),l=_.difference(g.p,k);if(f.comparePathToPrefix(g.p.join("."),d))if(f.isOpOnArray(g)&&null==Ember.get(a,"_idx")){var m=_.clone(g);m.p=l,c=f.extractArrayPath(m),""==c.p?a["arrayContent"+b+"Change"](c.idx,c.removeAmt,c.addAmt):Ember.get(a,c.p)["arrayContent"+b+"Change"](c.idx,c.removeAmt,c.addAmt)}else if(""==l.join(".")){var h;a["property"+b+"Change"]("content")}else g.oi&&null==g.od&&a.addKey(_.first(l)),g.od&&null==g.oi&&a.removeKey(_.first(l)),a["property"+b+"Change"](f.prefixToChildLimiations(l.join(".")))}})}},findMaxIndex:function(a){return a.indexOf(_.max(a))},extractArrayPath:function(a){return{idx:+_.last(a.p),p:_.slice(a.p,0,a.p.length-1).join("."),addAmt:null!=a.li?1:0,removeAmt:null!=a.ld?1:0}}}}}),define("ember-share/store",["./utils","exports"],function(a,b){"use strict";var c=a.guid,d=a.patchShare,e=Ember.RSVP.Promise;b["default"]=Ember.Object.extend(Ember.Evented,{socket:null,connection:null,url:window.location.hostname,init:function(){var a=this;if(this.checkSocket=function(){return new e(function(b,c){if(null==a.socket)a.one("connectionOpen",b);else{var d=function(c,d){switch(c){case"connected":return b();case"connecting":return a.connection.once("connected",b);default:d(c)}},e=function(a){switch(a){case"closed":return c("connection closed");case"disconnected":return c("connection disconnected");case"stopped":return c("connection closing")}},f=!1;d(a.connection.state,function(b){f?e(b):Ember.run.next(this,function(){f=!0,d(a.connection.state,e)})})}})},this.checkConnection=function(){return new e(function(b,c){return a.checkSocket().then(function(){return b()})["catch"](function(a){return c(a)})})},this.cache={},!window.sharedb)throw new Error("sharedb client not included");if(void 0===window.BCSocket&&void 0===window.Primus)throw new Error("No Socket library included");this.beforeConnect?this.beforeConnect().then(function(){a.trigger("connect")}):a.trigger("connect")},doConnect:function(a){var b=this;if(window.BCSocket)this.setProperties(a),this.socket=new BCSocket(this.get("url"),{reconnect:!0}),this.socket.onerror=function(a){b.trigger("connectionError",[a])},this.socket.onopen=function(){b.trigger("connectionOpen")},this.socket.onclose=function(){b.trigger("connectionEnd")};else{if(!window.Primus)throw new Error("No Socket library included");d(),this.setProperties(a);var c=this.get("url");this.get("protocol")&&(c=this.get("protocol")+"://"+c),this.get("port")&&(c+=":"+this.get("port")),this.socket=new Primus(c),this.socket.on("error",function(a){b.trigger("connectionError",[a])}),this.socket.on("open",function(){b.trigger("connectionOpen")}),this.socket.on("end",function(){b.trigger("connectionEnd")}),this.socket.on("close",function(){b.trigger("connectionEnd")})}var e=sharedb.Connection.prototype.handleMessage;sharedb.Connection.prototype.send;b.on("connectionEnd",function(){b.isAuthenticated=!1}),sharedb.Connection.prototype.handleMessage=function(a){var c;c=arguments;var d=this;return e.apply(d,c),"init"===a.a&&"string"==typeof a.id&&1===a.protocol&&"function"==typeof b.authenticate?(b.isAuthenticating=!0,b.authenticate(a.id).then(function(){console.log("authenticated !"),b.isAuthenticating=!1,b.isAuthenticated=!0,b.trigger("authenticated")})["catch"](function(a){b.isAuthenticating=!1})):void 0},this.connection=new sharedb.Connection(this.socket)}.on("connect"),find:function(a,b){a=a.pluralize();var c=this;return this.checkConnection().then(function(){return c.findQuery(a,{_id:b}).then(function(a){return a[0]},function(a){return a})})},createRecord:function(a,b){var d,f;f=(d=this._getPathForType(a))?d:a.pluralize(),f=this._getPrefix(a)+f,a=a.pluralize();var g=this;return g.checkConnection().then(function(){var d=g.connection.get(f,null==b.id?c():b.id);return e.all([g.whenReady(d).then(function(a){return g.create(a,b)}),g.subscribe(d)]).then(function(){var b=g._createModel(a,d);return g._cacheFor(a).addObject(b),b})})},deleteRecord:function(a,b){var c=this._cacheFor(a.pluralize()),d=c.findBy("id",b),f=d.get("doc");return new e(function(a,b){f.del(function(c){null!=c?b(c):a()})})},findAndSubscribeQuery:function(a,b){a=a.pluralize();var c=this,d=this._getPrefix(a);return c.cache[a]=[],this.checkConnection().then(function(){return new e(function(e,f){function g(b,d,g){return null!==b?f(b):void e(c._resolveModels(a,d))}b=c.connection.createSubscribeQuery(d+a,b,null,g),b.on("insert",function(b){c._resolveModels(a,b)}),b.on("remove",function(b){for(var d=0;d<b.length;d++){var e=c._resolveModel(a,b[d]);e.then(function(b){c.unload(a,b)})}})})})},findRecord:function(a,b){var c=this;return new e(function(d,e){c.findQuery(a,{_id:b}).then(function(a){d(a[0])})["catch"](function(a){e(a)})})},findQuery:function(a,b){var c,d;d=(c=this._getPathForType(a))?c:a.pluralize(),d=this._getPrefix(a)+d;var f=this;return f.cache[a.pluralize()]=[],this.checkConnection().then(function(){return new e(function(c,e){function g(b,d,g){return null!==b?e(b):void c(f._resolveModels(a,d))}f.connection.createFetchQuery(d,b,null,g)})})},findAll:function(a,b){throw a=a.pluralize(),new Error("findAll not implemented")},_cacheFor:function(a){a=a.pluralize();var b=this.cache[a];return void 0===b&&(this.cache[a]=b=[]),b},_getPathForType:function(a){var b=this.container.lookupFactory("adapter:"+a.singularize());return b?b.create().pathForType():void 0},_getPrefix:function(a){var b,c=this.container.lookupFactory("adapter:"+a.singularize());return c&&(b=c.create().get("prefix")),b||(b=""),b},_factoryFor:function(a){var b,c=(b=this.get("modelStr"))?b:"model-sdb";return this.container.lookupFactory(c+":"+a.singularize())},_createModel:function(a,b){var c=this._factoryFor(a);if(a=a.pluralize(),c){var d=c.create({doc:b,_type:a,_store:this});return d}throw new Error("Cannot find model for "+a)},_resolveModel:function(a,b){var c=this._cacheFor(a.pluralize()),d=Ember.get(b,"id")||Ember.get(b,"_id"),f=c.findBy("id",d);if(void 0!==f)return e.resolve(f);var g=this;return g.subscribe(b).then(function(b){return g._createModel(a,b)})},_resolveModels:function(a,b){for(var c=this._cacheFor(a.pluralize()),d=new Array(b.length),f=0;f<b.length;f++)d[f]=this._resolveModel(a,b[f]);return new e(function(a,b){e.all(d).then(function(b){c.addObjects(b),a(c)})["catch"](function(a){b(a)})})},whenReady:function(a){return"ready"===a.state?e.resolve(a):new e(function(b,c){a.on("load",function(){Ember.run(null,b,a)})})},unloadRecord:function(a){var b=this.cache[a.get("_type")];return a.get("doc").destroy(),a.destroy(),b.removeObject(a),this},unload:function(a,b){a=a.pluralize();var c=this._cacheFor(a);b.destroy(),c.removeObject(b)},unloadAll:function(a){try{for(var b=this.cache[a.pluralize()],c=0;c<b.length;c++){var d=b[c];d.get("doc").destroy(),d.destroy()}b.removeObjects(b)}catch(e){}},peekAll:function(a){return a=a.pluralize(),this._cacheFor(a)},subscribe:function(a){return a.subscribed?e.resolve(a):new e(function(b,c){a.subscribe(function(d){void 0===d?Ember.run(null,b,a):Ember.run(null,c,d)})})},create:function(a,b){return new e(function(c,d){a.create(b,"json0",function(b){void 0===b?Ember.run(null,c,a):Ember.run(null,d,b)})})}})}),define("ember-share/utils",["exports"],function(a){"use strict";function b(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}function c(a){return{newPos:a.newPos,components:a.components.slice(0)}}function d(){var a={};a[window.Primus.CLOSED]="disconnected",a[window.Primus.OPENING]="connecting",a[window.Primus.OPEN]="connected",window.sharedb.Connection.prototype.bindToSocket=function(b){function c(b){var c=a[b];d._setState(c)}var d=this;this.state=0===b.readyState||1===b.readyState?"connecting":"disconnected",c(Primus.OPENING),c(b.readyState),this.canSend="connected"===this.state,this.socket={send:function(a){b.write(a)}},b.on("data",function(a){if(a.a)try{d.handleMessage(a)}catch(b){throw d.emit("error",b),b}}),b.on("readyStateChange",function(){c(b.readyState)}),b.on("reconnecting",function(){"disconnected"===d.state&&(c(Primus.OPENING),d.canSend=!1)})}}var e=function(a){this.ignoreWhitespace=a};e.prototype={diff:function(a,b){if(b===a)return[{value:b}];if(!b)return[{value:a,removed:!0}];if(!a)return[{value:b,added:!0}];b=this.tokenize(b),a=this.tokenize(a);var d=b.length,e=a.length,f=d+e,g=[{newPos:-1,components:[]}],h=this.extractCommon(g[0],b,a,0);if(g[0].newPos+1>=d&&h+1>=e)return g[0].components;for(var i=1;f>=i;i++)for(var j=-1*i;i>=j;j+=2){var k,l=g[j-1],m=g[j+1];h=(m?m.newPos:0)-j,l&&(g[j-1]=void 0);var n=l&&l.newPos+1<d,o=m&&h>=0&&e>h;if(n||o){if(!n||o&&l.newPos<m.newPos?(k=c(m),this.pushComponent(k.components,a[h],void 0,!0)):(k=c(l),k.newPos++,this.pushComponent(k.components,b[k.newPos],!0,void 0)),h=this.extractCommon(k,b,a,j),k.newPos+1>=d&&h+1>=e)return k.components;g[j]=k}else g[j]=void 0}},pushComponent:function(a,b,c,d){var e=a[a.length-1];e&&e.added===c&&e.removed===d?a[a.length-1]={value:this.join(e.value,b),added:c,removed:d}:a.push({value:b,added:c,removed:d})},extractCommon:function(a,b,c,d){for(var e=b.length,f=c.length,g=a.newPos,h=g-d;e>g+1&&f>h+1&&this.equals(b[g+1],c[h+1]);)g++,h++,this.pushComponent(a.components,b[g],void 0,void 0);return a.newPos=g,h},equals:function(a,b){var c=/\S/;return!this.ignoreWhitespace||c.test(a)||c.test(b)?a===b:!0},join:function(a,b){return a+b},tokenize:function(a){return a}};var f=Array.isArray||function(a){return a instanceof Array},g=new e(!1);a.guid=b,a.diff=g,a.isArray=f,a.patchShare=d}),a.EmberShare=require("ember-share")}(window);